#!/bin/bash

## Run this on 'src' folder
## Get the output into some file and edit 
## to generate the initial replacement dictionary
for I in `find . -type f`; do grep "autoware_msgs" -HlsoZ $I | sed 's/^\.\///g' | xargs -0 dirname 2>/dev/null | sed 's/\//_/g' | sed 's/_packages_/::/g' | sed -e 's/nodes.*$//;s/_$//;s/_include.*$//;s/_lib$//;s/_srv$//;s/_src$//;s/_src_.*$//;s/computing_perception_detection_/autoware_detection_msgs\//;s/computing_perception_localization_/autoware_localization_msgs\//;s/computing_perception_semantics/autoware_semantics_msgs\//;s/computing_perception_prediction_/autoware_prediction_msgs\//;s/computing_planning_decision_/autoware_decision_msgs\//;s/computing_planning_mission_/autoware_mission_msgs\//;s/computing_planning_motion_/autoware_motion_msgs\//;s/sensing_fusion_/autoware_sensing_msgs\//' | sed 's/lidar_detector_//;s/lidar_tracker_//;s/vision_detector_//;s/fusion_tools_//;s/object_filter_//;s/visualizers_//'  ; done | sort -ud | sed -e 's/actuation_vehicles/\"autoware_actuation_msgs\"/;s/actuation_vehicles\//"autoware_actuation_msgs\"/;s/computing_perception_localization/\"autoware_localization_msgs\"/;s/computing_planning_mission/\"autoware_mission_msgs\"/;s/computing_planning_motion/\"autoware_motion_msgs\"/;s/computing_planning_decision/\"autoware_decision_msgs\"/;s/autoware_detection_msgs\//\"autoware_detection_msgs\"/;s/autoware_prediction_msgs/\"autoware_prediction_msgs\"/;s/autoware_semantics_msgs/\"autoware_semantics_msgs\"/;s/computing_planning_common_lib_/\"autoware_common_msgs\"/;s/common_libs_/\"autoware_common_msgs\"/;s/data/\"autoware_map_msgs\"/;s/sensing_filters/\"autoware_sensing_msgs\"/;s/sensing_fusion/\"autoware_sensing_msgs\"/;s/simulation_/\"autoware_simulation_msgs\"/;s/driveworks/\"autoware_driveworks_msgs\"/;s/socket/\"autoware_socket_msgs\"/;s/system_/\"autoware_system_msgs\"/;s/^util/\"autoware_util_msgs\"/;s/msgs_autoware_.*//;s/:://;s/\"/\",/2g;'
